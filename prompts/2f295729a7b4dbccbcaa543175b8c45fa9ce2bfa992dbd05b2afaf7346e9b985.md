---
name: Zig Style
description: Zig coding conventions and naming rules
---

# Zig 编码规范

基于 [Zig 官方风格指南](https://ziglang.org/documentation/master/#Style-Guide) 和标准库实践。

## 命名规范

| 类型 | 风格 | 示例 |
|------|------|------|
| 变量 | snake_case | `my_variable`, `file_path`, `max_len` |
| 函数 | camelCase | `fetchData`, `parseJson`, `toLower` |
| 类型/结构体 | PascalCase | `HttpError`, `TemplateInfo`, `SearchMode` |
| 常量 | SCREAMING_SNAKE_CASE | `REGISTRY_BASE`, `MAX_SIZE` |
| 文件名 | snake_case | `array_list.zig`, `http_client.zig` |

## 函数命名特例

- 返回 `type` 的函数用 PascalCase: `ArrayList(T)`, `HashMap(K, V)`
- 编译期函数 (`comptime`) 返回类型时用 PascalCase

## 格式化

- 使用 `zig fmt` 自动格式化代码
- 提交前运行 `zig fmt --check src/`

## 错误处理

- 优先使用 `try` 而非手动错误处理
- 错误类型用 PascalCase: `error.OutOfMemory`
- 使用 `errdefer` 确保资源清理

## 内存管理

- 显式传递 `allocator` 参数
- 使用 `defer`/`errdefer` 释放资源
- 避免全局状态

## 示例

```zig
const std = @import("std");

pub const HttpError = error{
    RequestFailed,
    NotFound,
};

pub fn fetchData(allocator: std.mem.Allocator, url: []const u8) HttpError![]const u8 {
    var response_buffer: [4096]u8 = undefined;
    const result = try doRequest(url, &response_buffer);
    return allocator.dupe(u8, result);
}
```
